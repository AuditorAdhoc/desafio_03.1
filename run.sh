#!/bin/bash

# Para servidor antigo
echo ""
echo "================================================================"
echo "‚õî Parando o servidor antigo..."
pkill -f "app.js"
echo "================================================================" 


# Startando o servidor
echo "================================================================"
echo "üöÄ Iniciando servidor..."
npm start & 
echo "================================================================"


# Aguarda alguns segundos para o servidor subir
echo "================================================================"
echo "‚è≥ Aguardando o servidor iniciar..."
sleep 5
echo "================================================================"

# Fun√ß√£o para exibir a mensagem de boas-vindas
exibir_mensagem_boas_vindas() {
    clear
    echo ""
    echo "============================================"
    echo "Ol√°!! seja Bem-vindo(a) - Desafio 03 da mentoria do J√∫lio de Lima!"
    read -p "Por favor, me diga seu Nome: " name
    echo "$name"
    clear
    echo -e "üìå Seja bem-vindo(a): $name\nPor gentileza escolha uma das op√ß√µes abaixo:"
    echo "================================================================" 
}
exibir_mensagem_boas_vindas
# PS3=$'\nDigite o n√∫mero da op√ß√£o desejada: '
options=("Todos os testes" "Testes de Login" "Testes de forgot" "Sair")

select opt in "${options[@]}"
do
    case $opt in
        "Todos os testes")
            echo "‚ñ∂Ô∏è Executando todos os testes..."
            npm test
            break
            ;;
        "Testes de Login")
            echo "üîç Executando testes com tag [login]..."
            npm test --grep "\[login\]"
            break
            ;;
        "Testes de forgot")
            echo "‚úÖ Executando testes com tag [sucesso]..."
            npm test --grep "\[forgot\]"
            break
            ;;
        "Sair")
            echo "üëã Obrigado $name volte sempre..."
            break
            ;;
        *) echo "‚ö†Ô∏è Vish!!! $name Op√ß√£o inv√°lida! Tente novamente.";;
    esac
     read -p "Pressione Enter para retornar ao inicio..."
done
